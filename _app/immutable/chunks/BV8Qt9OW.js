import"./Bg9kRutz.js";import{i as ye}from"./BxiFlMN0.js";import{p as Ce,aK as Ge,a9 as u,a7 as a,aa as xe,f as se,O as e,s as be,c as K,r as P,t as W,a as Se,a8 as c,a0 as re,B as _,aj as Le}from"./D2BM3cv1.js";import{d as ke,s as ne,e as T,a as w,t as X}from"./CRc66pB2.js";import{s as z,a as _e,b as Re,t as ce}from"./DoWIUU7Y.js";import{b as je}from"./BuXNm5Ru.js";import{p as me,i as ge}from"./C5aigyhq.js";import{s as we,a as B,c as U}from"./BRe-H2Zv.js";import{E as ae,h as Q,C as Ie,F as Be,p as $e,a5 as Te,i as Ne,_ as Fe,a6 as qe,a7 as R,z as Ae,a8 as He,t as Ve,j as ze}from"./B11Zin6s.js";import{D as Pe,a as Xe,T as Ye}from"./BLnmyPzY.js";import{s as Me,f as De}from"./DswakvRO.js";import{e as de,i as ue}from"./BbljCwWF.js";var Ue=X('<div class="mx-2"> </div>'),Ke=X('<span class="dy-btn dy-btn-ghost normal-case truncate text-clip col-start-1 svelte-1x2t4xy" role="button"> </span>'),Je=X('<span class="dy-btn dy-btn-square dy-btn-ghost normal-case truncate text-clip svelte-1x2t4xy"> </span>'),Qe=X('<!>  <div role="menu"><!> <!></div>',1);function he(le,N){Ce(N,!1);const[g,ie]=we(),o=()=>B(Ie,"$themeColors",g),r=()=>B(Be,"$s",g),C=()=>B($e,"$refs",g),b=()=>B(Te,"$themeBookColors",g),Y=c(),m=c(),F=c(),M=c(),q=c();let A=me(N,"options",24,()=>[]),O=me(N,"cols",8,6),S=c(null);function j(i){a(S,i.target.id)}function H(){a(S,null)}function p(i){const s=i.touches[0],d=document.elementFromPoint(s.clientX,s.clientY),v=d.getBoundingClientRect();s.clientX>=v.left&&s.clientX<=v.right&&s.clientY>=v.top&&s.clientY<=v.bottom?a(S,d.id):a(S,null)}const E=Ge();function $(i){const s=i.id,d=i==null?void 0:i.url;E("menuaction",{text:s,url:d})}u(()=>o(),()=>{a(Y,o().ButtonSelectedColor)}),u(()=>r(),()=>{a(m,ae(Object.fromEntries(Object.entries(r()["ui.button.book-grid"]).filter(([i])=>i!="background-color"))))}),u(()=>r(),()=>{a(F,ae(Object.fromEntries(Object.entries(r()["ui.button.chapter-intro"]).filter(([i])=>i!="background-color"))))}),u(()=>r(),()=>{a(M,ae(r()["ui.text.book-group-title"]))}),u(()=>(C(),b(),r()),()=>{a(q,(i,s)=>{var L;const d=(L=Q.bookCollections.find(h=>h.id===C().collection).books.find(h=>h.id===i))==null?void 0:L.section;return Object.keys(b()).includes(d)?b()[d]:r()[s]["background-color"]})}),xe(),ye();var D=ke(),Z=se(D);de(Z,1,A,ue,(i,s)=>{var d=Qe(),v=se(d);{var L=G=>{var k=Ue();const x=re(()=>Ne(e(s).header));var J=K(k,!0);P(k),W(()=>{z(k,"style",e(M)),ce(k,"my-2",e(x)),ne(J,e(s).header)}),w(G,k)};ge(v,G=>{e(s).header&&G(L)})}var h=be(v,2),ee=K(h);{var ve=G=>{var k=ke(),x=se(k);de(x,1,()=>e(s).rows,ue,(J,V)=>{var I=Ke();const t=re(()=>e(S)===e(V).id?e(Y):e(q)(e(V).id,"ui.button.chapter-intro"));var n=K(I,!0);P(I),W(()=>{z(I,"id",e(V).id),z(I,"style",e(F)),ce(I,"col-span-5",O()==5),ce(I,"col-span-6",O()==6),_e(I,"background-color",e(t)),ne(n,e(V).label)}),T("click",I,()=>$(e(V))),w(J,I)}),w(G,k)};ge(ee,G=>{e(s).rows&&G(ve)})}var te=be(ee,2);de(te,1,()=>e(s).cells,ue,(G,k)=>{var x=Je();const J=re(()=>e(S)===e(k).id?e(Y):e(q)(e(k).id,"ui.button.chapter-intro"));var V=K(x,!0);P(x),W(()=>{z(x,"id",e(k).id),z(x,"style",e(m)),_e(x,"background-color",e(J)),ne(V,e(k).label)}),T("click",x,()=>$(e(k))),w(G,x)}),P(h),W(()=>{Re(h,`grid grid-cols-${O()??""} gap-1`),ce(h,"grid-cols-5",O()==5),ce(h,"grid-cols-6",O()==6)}),T("touchstart",h,j),T("touchmove",h,p),T("touchend",h,H),T("mouseover",h,j),T("mouseout",h,H),w(i,d)}),w(le,D),Se(),ie()}var We=X('<div class="flex items-center"> </div>'),Ze=X('<div class="menu ps-2 cursor-pointer min-w-[16rem] flex-grow flex items-center" role="button"> </div>'),et=X('<!> <div class="flex flex-wrap"></div>',1);function tt(le,N){Ce(N,!1);const[g,ie]=we(),o=()=>B(Fe,"$theme",g),r=()=>B(Ie,"$themeColors",g),C=()=>B(Be,"$s",g),b=c(),Y=c(),m=c();let F=me(N,"options",24,()=>[]);const M=Ge();function q(p){const E=p.id,$=p==null?void 0:p.url;M("menuaction",{text:E,url:$})}let A=c(null);function O(p){console.log("hovered:",p.target.id),a(A,p.target.id)}function S(){a(A,null)}u(()=>(o(),r()),()=>{a(b,o()==="Dark"?"#444444":r().ButtonSelectedColor)}),u(()=>C(),()=>{a(Y,C()["ui.button.book-list"]["background-color"])}),u(()=>C(),()=>{a(m,ae(C()["ui.button.book-list"]))}),xe(),ye();var j=ke(),H=se(j);de(H,1,F,ue,(p,E)=>{var $=et(),D=se($);{var Z=s=>{var d=We();const v=re(()=>ae(C()["ui.text.book-group-title"]));var L=K(d,!0);P(d),W(()=>{z(d,"style",e(v)),ne(L,e(E).header)}),w(s,d)};ge(D,s=>{e(E).header&&s(Z)})}var i=be(D,2);de(i,5,()=>e(E).cells,ue,(s,d)=>{var v=Ze(),L=K(v,!0);P(v),W(()=>{z(v,"id",e(d).id),z(v,"style",e(m)),_e(v,"background-color",e(A)==e(d).id?e(b):e(Y)),ne(L,e(d).label)}),T("click",v,()=>q(e(d))),w(s,v)}),P(i),T("mouseover",i,O),T("mouseout",i,S),w(p,$)}),w(le,j),Se(),ie()}var ot=X('<div class="normal-case whitespace-nowrap"> </div> <!>',1),st=X("<div><!></div>");function pt(le,N){Ce(N,!1);const[g,ie]=we(),o=()=>B(R,"$nextRef",g),r=()=>B($e,"$refs",g),C=()=>B(He,"$userSettingsOrDefault",g),b=()=>B(Ve,"$t",g),Y=()=>B(Be,"$s",g),m=c(),F=c(),M=c(),q=c(),A=c(),O=c(),S=c(),j=c(),H=c(),p=c(),E=c(),$=c(),D=c();let Z=me(N,"displayLabel",8,void 0);const i=Q.mainFeatures["show-chapter-selector-after-book"];let s=c();function d(t){return Object.keys(e($).find(l=>l.bookCode===t).versesByChapters).length}function v(t){return Object.keys(e($).find(l=>l.bookCode===t).versesByChapters)[0]}function L(t,n){return!t||t==="i"||!n||Object.keys(n).length===0?0:Object.keys(n[t]).length}async function h(t){var n;if(t.detail.tab===e(j)&&((n=t.detail)!=null&&n.url)){qe({collection:r().collection,book:t.detail.text,url:t.detail.url});return}if(!i)U(R,_(o).book=t.detail.text,_(o)),await $e.set({book:o().book,chapter:1}),ve();else switch(t.detail.tab){case e(j):{e(s).setActive(e(H)),U(R,_(o).book=t.detail.text,_(o));const l=d(o().book);if(l===0){U(R,_(o).chapter="i",_(o)),await te();break}U(R,_(o).chapter=v(o().book),_(o)),l===1&&await te();break}case e(H):U(R,_(o).chapter=t.detail.text,_(o)),!e(S)||o().chapter==="i"||e(M)===0?await te():e(s).setActive(e(p));break;case e(p):t.detail.text==="i"?(U(R,_(o).chapter="i",_(o)),U(R,_(o).verse="",_(o))):U(R,_(o).verse=t.detail.text,_(o)),await te();break;default:console.log("Book navigateReference: Default");break}}let ee=c();function ve(){e(ee).close()}async function te(){await Ae({collection:r().collection,book:o().book,chapter:o().chapter,verse:o().verse}),ve()}function G(){e(s)&&e(s).setActive(e(j)),R.reset()}function k(t){let n;return t.type==="quiz"&&(n=ze(`/quiz/${r().collection}/${t.id}`)),n}function x(t){return t==="i"?b().Chapter_Introduction_Symbol:e(A)[Number(t)]!==void 0?e(A)[Number(t)]:De(e(q),t)}let J=({colId:t,bookLabel:n="abbreviation"})=>{let l=[];var f=null;return Q.bookCollections.find(y=>y.id===t).books.forEach(y=>{const oe=k(y);if(r().allBookIds.find(fe=>fe===y.id)||oe){let pe={label:y[n]||y.name,id:y.id,url:oe},Oe=y.testament||"";if((f==null||Oe!==f)&&Q.mainFeatures["book-group-titles"])l.push({header:y.testament?b()["Book_Group_"+y.testament]:f==null?"":"Â ",cells:[pe]}),f=Oe;else if(l.length>0){let Ee=l.at(-1).cells;l.at(-1).cells=[...Ee,pe]}else l.push({cells:[pe]})}}),l},V=t=>{var l;return[{rows:((l=e($).find(f=>f.bookCode===e(m)))==null?void 0:l.hasIntroduction)?[{label:b().Chapter_Introduction_Title,id:"i"}]:null,cells:Object.keys(t).map(f=>({label:x(f),id:f}))}]},I=t=>{let n,l=e(D)[t];return t==="i"?n=[{cells:[{label:b().Chapter_Introduction_Symbol,id:"i"}]}]:e(M)===0?n=[]:n=[{cells:Object.keys(l).map(f=>({label:De(e(q),f),id:f}))}],n};u(()=>(o(),r()),()=>{a(m,o().book===""?r().book:o().book)}),u(()=>(o(),r()),()=>{a(F,o().chapter===""?r().chapter:o().chapter)}),u(()=>r(),()=>{a($,r().catalog.documents)}),u(()=>(e($),e(m)),()=>{var t;a(D,((t=e($).find(n=>n.bookCode===e(m)))==null?void 0:t.versesByChapters)??[])}),u(()=>(e(F),e(D)),()=>{a(M,L(e(F),e(D)))}),u(()=>(r(),e(m)),()=>{a(q,Me(Q,r().collection,e(m)))}),u(()=>(r(),e(m)),()=>{a(A,Q.bookCollections.find(t=>r().collection===t.id).books.find(t=>e(m)===t.id).chaptersLabels??{})}),u(()=>C(),()=>{a(O,C()["book-selection"]==="list")}),u(()=>C(),()=>{a(S,C()["verse-selection"])}),u(()=>b(),()=>{a(j,b().Selector_Book)}),u(()=>b(),()=>{a(H,b().Selector_Chapter)}),u(()=>b(),()=>{a(p,b().Selector_Verse)}),u(()=>(Le(Z()),r(),e(m)),()=>{var t;a(E,Z()??((t=Q.bookCollections.find(n=>n.id===r().collection).books.find(n=>n.id===e(m)))==null?void 0:t.name))}),xe(),ye(),je(Pe(le,{$$events:{"nav-end":G},$$slots:{label:(t,n)=>{var l=ot(),f=se(l);const y=re(()=>ae(Y()["ui.selector.book"]));var oe=K(f,!0);P(f);var fe=be(f,2);Xe(fe,{color:"white"}),W(()=>{z(f,"style",e(y)),ne(oe,e(E))}),w(t,l)},content:(t,n)=>{var l=st(),f=K(l),y=re(()=>({[e(j)]:{component:e(O)?tt:he,props:{options:J({colId:r().collection,bookLabel:e(O)?"name":"abbreviation"})},visible:!0},[e(H)]:{component:he,props:{options:V(e(D))},visible:i},[e(p)]:{component:he,props:{options:I(e(F))},visible:i&&e(S)}}));je(Ye(f,{get options(){return e(y)},$$events:{menuaction:h},$$legacy:!0}),oe=>a(s,oe),()=>e(s)),P(l),w(t,l)}},$$legacy:!0}),t=>a(ee,t),()=>e(ee)),Se(),ie()}export{pt as B,he as S};
