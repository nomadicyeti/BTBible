import{c as j}from"../chunks/EgJd3ViG.js";import"../chunks/Bg9kRutz.js";import{i as je}from"../chunks/BxiFlMN0.js";import{p as De,a9 as N,aa as Pe,t as $,a as Ve,O as a,a8 as O,c as l,r as c,s as x,a7 as z,f as de,a0 as D}from"../chunks/D2BM3cv1.js";import{a as d,t as f,e as Z,s as P,d as ve}from"../chunks/CRc66pB2.js";import{a as qe}from"../chunks/C6CPo2A3.js";import{i as y}from"../chunks/C5aigyhq.js";import{e as Xe,i as Ge}from"../chunks/BbljCwWF.js";import{s as L,a as He}from"../chunks/DoWIUU7Y.js";import{s as Je,a as w}from"../chunks/BRe-H2Zv.js";import{g as V,b as fe}from"../chunks/CroP3Izp.js";import{p as Ke}from"../chunks/BYjJit_y.js";import{B as Qe}from"../chunks/B3ruGJNX.js";import{N as Ue}from"../chunks/Qa4b1zFn.js";import{v as ue,h as C,w as q,j as X,x as We,y as me,M as Ye,z as Ze,A as et,B as tt,C as at,p as ot,D as st,E as _e,F as nt}from"../chunks/B11Zin6s.js";import{A as rt}from"../chunks/DEJK9EAC.js";import{T as it}from"../chunks/Yb6izfNT.js";import{a as ct}from"../chunks/MJDoPnjS.js";async function lt({params:G}){const H=Number(G.id),_=j.screens.find(p=>p.id===H),M=[];for(const p of _.items){const b=j.items.find(T=>T.id===p.id);b&&M.push(b)}const E=j.features,u=j.title;return{menu:_,items:M,features:E,title:u}}const Dt=Object.freeze(Object.defineProperty({__proto__:null,load:lt},Symbol.toStringTag,{value:"Module"}));var dt=f('<label for="sidebar" slot="center"><div class="btn btn-ghost normal-case text-xl"> </div></label>'),vt=f('<label class="dy-btn dy-btn-ghost p-0.5 dy-no-animation"><!></label>'),ft=f('<div class="flex items-center"><div class="flex"><!></div></div>'),ut=f('<div class="contents-item-audio-image"><!></div>'),mt=f('<div class="contents-image-block"><img class="contents-image"></div>'),_t=f('<div class="contents-title"> </div>'),pt=f('<div class="contents-subtitle"> </div>'),gt=f('<div class="contents-ref"> </div>'),bt=f('<div class="contents-ref"></div>'),kt=f('<div class="contents-ref"></div>'),ht=f('<div class="contents-item-block contents-link-ref"><!> <!> <div class="contents-text-block"><!> <!> <!></div></div>'),yt=f('<div class="grid grid-rows-[auto,1fr]" style="height:100vh;height:100dvh;"><div class="navbar"><!></div> <div class="overflow-y-auto mx-auto max-w-screen-md"><div id="container" class="contents"></div></div> <!></div>');function Pt(G,H){var ie,ce;De(H,!1);const[_,M]=Je(),E=()=>w(at,"$themeColors",_),u=()=>w(Ke,"$page",_),p=()=>w(We,"$language",_),b=()=>w(ot,"$refs",_),T=()=>w(q,"$contentsStack",_),ee=()=>w(nt,"$s",_),pe=()=>w(st,"$contentsFontSize",_),te=O(),ae=O(),oe=O(),se=O(),ne=O(),ge=ue(C.programVersion,"12.0")<0?"illustrations":"contents",be=ue(C.programVersion,"12.0")<0?"assets":"contents";function ke(e,t){e.stopPropagation();const s=t.audioFilename[p()]??t.audioFilename.default;let o=new Audio;o.src=`${fe}/${be}/${s}`,o.play()}function he(e,t){e.target.style.background=a(te),setTimeout(()=>{$e(t)},100)}function ye(e){if(e.features["image-width"])return"width: "+e.features["image-width"]}async function $e(e){switch(e.linkType){case"reference":q.pushItem(u().data.menu.id);const t=await re(e);await Ze(t);break;case"screen":q.pushItem(u().data.menu.id),await V(X(`/contents/${e.linkTarget}`));break;case"other":switch(e.linkLocation){case"about":case"settings":V(X(`/${e.linkLocation}`));break;case"layout":me.open(Ye);break;case"website":window.open(`${e.linkTarget}`,"_blank");break}break;default:V(X(`/${e.linkLocation}`));break}}async function re(e){var g;let t=b().docSet,s=t.split("_")[1],o,i,v;const m=e.linkTarget.split(".");switch(e.layoutMode&&((g=e.layoutCollection)==null?void 0:g.length)>0&&(s=e.layoutCollection[0],t=C.bookCollections.find(k=>k.id===s).languageCode+"_"+s),m.length){case 1:o=m[0],i=await Se(o,t);break;case 2:o=m[0],i=m[1];break;case 3:o=m[0],i=m[1],v=m[2];break}return{docSet:t,collection:s,book:o,chapter:i,verse:v}}let J=new Map;async function we(e){return J.has(e)||J.set(e,await xe(e)),J.get(e)}async function xe(e){const t=await re(e);let s=b().collection,o=t.collection??s;const i=t.verse?parseInt(t.verse):-1;return ct(o,t.book,t.chapter,[[i,-1,"-"]])}function Ce(e){let t="";switch(e.data.features["title-type"]){case"app-name":t=C.name;break;case"screen":t=e.data.menu.title[p()]??e.data.menu.title.default??"";break;case"custom":t=e.data.title[p()]??e.data.title.default??"";break}return t}function Te(){if(T().length>0){const e=q.popItem();V(X(`/contents/${e}`))}}async function Se(e,t){let s="1";if(t===a(se))s=Object.keys(a(oe).find(o=>o.bookCode===e).versesByChapters)[0];else{let i=(await et(t)).documents;s=Object.keys(i.find(v=>v.bookCode===e).versesByChapters)[0]}return s}const Be=((ie=C)==null?void 0:ie.bottomNavBarItems)&&((ce=C)==null?void 0:ce.bottomNavBarItems.length)>0,Fe="contents";N(()=>E(),()=>{z(te,E().ContentsItemTouchColor)}),N(()=>u(),()=>{z(ae,Ce(u()))}),N(()=>b(),()=>{z(oe,b().catalog.documents)}),N(()=>b(),()=>{z(se,b().docSet)}),N(()=>T(),()=>{z(ne,T().length>0)}),Pe(),je();var K=yt(),Q=l(K),Ie=l(Q);Ue(Ie,{backNavigation:Te,get showBackButton(){return a(ne)},center:s=>{var o=dt(),i=l(o),v=l(i,!0);c(i),c(o),$(()=>P(v,a(ae))),d(s,o)},end:s=>{var o=ft(),i=l(o),v=l(i);{var m=g=>{var k=vt(),Y=l(k);it(Y,{color:"white"}),c(k),Z("click",k,()=>me.open(tt,{contentsMode:!0})),d(g,k)};y(v,g=>{u().data.features["show-text-size-button"]===!0&&g(m)})}c(i),c(o),d(s,o)},$$slots:{center:!0,end:!0}}),c(Q);var U=x(Q,2),W=l(U);const Ae=D(()=>_e(ee()["body.contents"]));Xe(W,5,()=>u().data.items,Ge,(e,t)=>{var s=ht(),o=l(s);{var i=n=>{var r=ut(),h=l(r);rt.Volume(h,{}),c(r),Z("click",r,S=>ke(S,a(t))),d(n,r)};y(o,n=>{(a(t).audioFilename[p()]||a(t).audioFilename.default)&&n(i)})}var v=x(o,2);{var m=n=>{var r=mt();const h=D(()=>_e(ee()["div.contents-image-block"])??""),S=D(()=>ye(a(t))??""),B=D(()=>`${a(h)}${a(S)}`);var F=l(r);c(r),$(()=>{L(r,"style",a(B)),L(F,"src",`${fe??""}/${ge??""}/${a(t).imageFilename??""}`),L(F,"alt",a(t).imageFilename)}),d(n,r)};y(v,n=>{a(t).imageFilename&&n(m)})}var g=x(v,2),k=l(g);{var Y=n=>{var r=_t(),h=l(r,!0);c(r),$(()=>P(h,a(t).title[p()]??a(t).title.default??"")),d(n,r)};y(k,n=>{u().data.features["show-titles"]===!0&&n(Y)})}var le=x(k,2);{var ze=n=>{var r=pt(),h=l(r,!0);c(r),$(()=>P(h,a(t).subtitle[p()]??a(t).subtitle.default??"")),d(n,r)};y(le,n=>{u().data.features["show-subtitles"]===!0&&n(ze)})}var Le=x(le,2);{var Me=n=>{var r=ve(),h=de(r);{var S=B=>{var F=ve(),Ee=de(F);qe(Ee,()=>we(a(t)),I=>{var R=kt();d(I,R)},(I,R)=>{var A=gt(),Re=l(A,!0);c(A),$(()=>P(Re,a(R))),d(I,A)},(I,R)=>{var A=bt();d(I,A)}),d(B,F)};y(h,B=>{a(t).linkType==="reference"&&B(S)})}d(n,r)};y(Le,n=>{u().data.features["show-references"]===!0&&n(Me)})}c(g),c(s),$(()=>{L(s,"id",a(t).id),He(g,"font-size",`${pe()??""}px`)}),Z("click",s,n=>he(n,a(t))),d(e,s)}),c(W),c(U);var Ne=x(U,2);{var Oe=e=>{Qe(e,{barType:Fe})};y(Ne,e=>{Be&&e(Oe)})}c(K),$(()=>L(W,"style",a(Ae))),d(G,K),Ve(),M()}export{Pt as component,Dt as universal};
