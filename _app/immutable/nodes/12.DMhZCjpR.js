import{g as Ga,a as Ja,b as Ka}from"../chunks/Kf3rE6wE.js";import{h as ya,ad as Qa,v as Wa,ae as Ya,F as Za,j as sa,y as at,af as tt,t as et,x as nt,E as X,p as _a,ag as st}from"../chunks/B11Zin6s.js";import"../chunks/Bg9kRutz.js";import{i as ot}from"../chunks/BxiFlMN0.js";import{t as g,p as lt,a8 as W,a7 as V,a as rt,O as o,c as s,r as n,s as f,a0 as q,f as it,ak as dt}from"../chunks/D2BM3cv1.js";import{a as u,n as la,e as k,t as C,s as w}from"../chunks/CRc66pB2.js";import{p as F,i as N}from"../chunks/C5aigyhq.js";import{e as ma,i as ba}from"../chunks/BbljCwWF.js";import{s as _,b as Y}from"../chunks/DoWIUU7Y.js";import{s as ct,a as G,b as vt}from"../chunks/BRe-H2Zv.js";import{g as oa,b as pt}from"../chunks/CroP3Izp.js";import{p as ft}from"../chunks/BYjJit_y.js";import{N as gt}from"../chunks/Qa4b1zFn.js";import{C as ut,S as _t}from"../chunks/lVA9ZTpj.js";import{a as mt}from"../chunks/MJDoPnjS.js";import{g as ha}from"../chunks/CiLFFf9M.js";var bt=la('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM17.99 9l-1.41-1.42-6.59 6.59-2.58-2.57-1.42 1.41 4 3.99z"></path></svg>');function ht(M,x){let h=F(x,"color",8,"black"),D=F(x,"size",8,24);var i=bt();g(()=>{_(i,"height",D()),_(i,"width",D()),_(i,"fill",h())}),u(M,i)}var yt=la('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></svg>');function xt(M,x){let h=F(x,"color",8,"black"),D=F(x,"size",8,24);var i=yt();g(()=>{_(i,"height",D()),_(i,"width",D()),_(i,"fill",h())}),u(M,i)}var Dt=la('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></svg>');function St(M,x){let h=F(x,"color",8,"black"),D=F(x,"style",8,"");var i=Dt();g(()=>{_(i,"fill",h()),_(i,"style",D())}),u(M,i)}async function kt({params:M,fetch:x}){const h=ya.plans.plans,D=M.id,i=h.find(R=>R.id===D),l=await Qa(x,i),T=await Ga(D);return{planConfig:i,planData:l,planCompletionData:T}}const Zt=Object.freeze(Object.defineProperty({__proto__:null,load:kt},Symbol.toStringTag,{value:"Module"}));var wt=C('<label for="sidebar"><div class="btn btn-ghost normal-case text-xl"> </div></label>'),Ct=C('<div><img class="plan-image"></div>'),Pt=C('<div name="my_tabs_1" aria-label="settings icon"><!></div>'),It=C('<div class="plan-state-and-date"> </div>'),$t=C('<div class="plan-button-block"><div class="plan-button" id="PLAN-continue"><button> </button></div></div>'),zt=C('<div class="plan-button-block"><div class="plan-button" id="PLAN-start"> </div></div>'),Rt=C('<div id="plan-page" class="plan-details"><div class="plan-title"> </div> <div class="plan-days"> </div> <div class="plan-description"> </div> <!> <!></div>'),Mt=C('<li><div id="D-1"><div class="plan-day-box-content"><div class="plan-day-box-weekday"> </div> <div class="plan-day-box-number"> </div></div></div></li>'),Vt=C('<tr class="plan-item"><td class="plan-item-checkbox plan-checkbox-image"><!></td><td class="plan-item-title"><span class="plan-item-reference"> </span></td></tr>'),Bt=C('<div class="plan-days-scroller svelte-1vs6npl" id="scroller"><ul class="dy-menu-horizontal bg-base-200 rounded-box"></ul></div> <div class="plan-items" id="container"><table class="plan-items-table"><tbody></tbody></table></div>',1),Lt=C('<div id="container" class="plan-config"><div class="plan-config-info"> </div>  <div class="plan-button plan-config-button" id="PLAN-stop"> </div></div>'),Nt=C('<div class="grid grid-rows-[auto,1fr]" style="height:100vh;height:100dvh;"><div class="navbar"><!></div> <div class="overflow-y-auto mx-auto md:max-w-screen-md w-full"><!> <div role="tablist" class="dy-tabs dy-tabs-bordered"><div name="my_tabs_1" aria-label="info icon"><!></div> <div name="my_tabs_1" aria-label="calendar logo"><!></div> <!></div> <div id="container" class="plan-chooser"><!> <!> <!></div></div></div>');function ae(M,x){lt(x,!1);const[h,D]=ct(),i=()=>G(Za,"$s",h),l=()=>G(ft,"$page",h),T=()=>G(_a,"$refs",h),R=()=>G(et,"$t",h),Z=()=>G(nt,"$language",h),xa=Wa(ya.programVersion,"12.0")<0?"illustrations":"plans",j=i()["ui.bar.text-select.icon"].color;let P=W("info"),J=W(!1);Sa();let O=W(l().data.planData.items[0]),Da=l().data.planData.id,E=W(""),aa="";async function Sa(){const a=await Ya(l().data.planData.id);if(a){const e=a.state;if(V(E,e),aa=new Date(a.date).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),e&&e==="started"){V(P,"calendar"),V(J,!0);const d=await Ja(l().data.planData,-1);if(d!==-1){const r=l().data.planData.items.findIndex(v=>v.day===d);r!=-1&&V(O,l().data.planData.items[r])}}}}function ka(a,e){let t=!1;return l().data.planCompletionData.filter(r=>r.day===a&&r.itemIndex===e).length>0&&(t=!0),t}function wa(a){let e=T().collection;const[t,d,r,v,I]=ha(a);return mt(e,d,v,I)}function Ca(a,e){let t=!1;const r=T().catalog.documents.find(m=>m.bookCode===a),v=(r==null?void 0:r.versesByChapters)??[],I=Object.keys(v).find(m=>m===e.toString());return r&&I&&(t=!0),t}function Pa(a,e,t){if(o(J)){let d=T().collection;const[r,v,I,m,$]=ha(e),[y,b,H]=$[0];if(Ca(v,m)){let z=y===-1?1:y;Ka(l().data.planData.id,a,t).then(([p,c])=>{vt(st,{planId:l().data.planData.id,planDay:a.day,planEntry:t,planBookId:v,planChapter:m,planFromVerse:y,planToVerse:b,planReference:e,planNextReference:p,planNextReferenceIndex:c,completed:!1}),_a.set({docSet:d,book:v,chapter:m.toString(),verse:z.toString()}),oa(sa("/text"))})}}}function Ia(){oa(sa("/plans"))}function $a(){let a="";return o(E)==="started"?a=R().Plans_Date_Started.replace("%s",aa):o(E)==="completed"&&(a=R().Plans_Date_Completed.replace("%s",aa)),a}let ta=!1,ra=0,ia=0;function za(a){ta=!0,ra=a.pageX-scroller.offsetLeft,ia=scroller.scrollLeft}function Ra(a){if(!ta)return;a.preventDefault();const t=(a.pageX-scroller.offsetLeft-ra)*2;scroller.scrollLeft=ia-t}function da(){ta=!1}ot();var ea=Nt(),na=s(ea),Ma=s(na);gt(Ma,{backNavigation:Ia,center:e=>{var t=wt(),d=s(t),r=s(d,!0);n(d),n(t),g(()=>w(r,l().data.planConfig.title[Z()]??l().data.planConfig.title.default??"")),u(e,t)},$$slots:{center:!0}}),n(na);var ca=f(na,2),va=s(ca);{var Va=a=>{var e=Ct(),t=s(e);n(e),g(()=>{_(t,"src",`${pt??""}/${xa??""}/${l().data.planConfig.image.file??""}`),_(t,"alt",l().data.planConfig.image.file),_(t,"width",l().data.planConfig.image.width),_(t,"height",l().data.planConfig.image.height)}),u(a,e)};N(va,a=>{l().data.planConfig.image&&a(Va)})}var K=f(va,2);const Ba=q(()=>X(i()["ui.plans.tabs"]));var A=s(K);const La=q(()=>X(i()["ui.plans.tabs.text"]));var Na=s(A),Ha=q(()=>X(i()["ui.plans.tabs.icon"]));St(Na,{color:j,get style(){return o(Ha)}}),n(A);var U=f(A,2),Oa=s(U),Aa=q(()=>X(i()["ui.plans.tabs.icon"]));ut(Oa,{color:j,get style(){return o(Aa)}}),n(U);var Fa=f(U,2);{var Ta=a=>{var e=Pt(),t=s(e),d=q(()=>X(i()["ui.plans.tabs.icon"]));_t(t,{color:j,get style(){return o(d)}}),n(e),g(()=>Y(e,`dy-tab ${(o(P)==="settings"?"dy-tab-active":"")??""}`)),k("click",e,()=>V(P,"settings")),u(a,e)};N(Fa,a=>{o(J)===!0&&a(Ta)})}n(K);var pa=f(K,2),fa=s(pa);{var ja=a=>{var e=Rt(),t=s(e),d=s(t,!0);n(t);var r=f(t,2),v=s(r,!0);g(()=>w(v,R().Plans_Number_Days.replace("%d",l().data.planConfig.days))),n(r);var I=f(r,2),m=s(I,!0);n(I);var $=f(I,2);{var y=p=>{var c=It(),S=s(c,!0);g(()=>w(S,$a())),n(c),u(p,c)};N($,p=>{(o(E)==="started"||o(E)==="completed")&&p(y)})}var b=f($,2);{var H=p=>{var c=$t(),S=s(c),B=s(S),Q=s(B,!0);n(B),n(S),n(c),g(()=>w(Q,R().Plans_Button_Continue_Reading)),k("click",B,()=>V(P,"calendar")),u(p,c)},z=p=>{var c=zt(),S=s(c),B=s(S,!0);n(S),n(c),g(()=>w(B,R().Plans_Button_Start_Plan)),k("click",S,()=>oa(sa(`/plans/${l().data.planData.id}/settings`))),u(p,c)};N(b,p=>{o(J)===!0?p(H):p(z,!1)})}n(e),g(()=>{w(d,l().data.planData.title[Z()]??l().data.planData.title.default??""),w(m,l().data.planData.description[Z()]??l().data.planData.description.default??"")}),u(a,e)};N(fa,a=>{o(P)==="info"&&a(ja)})}var ga=f(fa,2);{var Ea=a=>{var e=Bt(),t=it(e),d=s(t);ma(d,5,()=>l().data.planData.items,ba,(m,$)=>{var y=Mt(),b=s(y),H=s(b),z=s(H),p=s(z,!0);n(z);var c=f(z,2),S=s(c,!0);n(c),n(H),n(b),n(y),g(()=>{Y(b,`plan-day-box plan-day-box-uncompleted ${(o(O).day===o($).day?"selected plan-day-box-selected":"plan-day-box-unselected")??""}`),w(p,R().Plans_Day),w(S,o($).day)}),k("click",b,()=>V(O,o($))),u(m,y)}),n(d),n(t);var r=f(t,2),v=s(r),I=s(v);ma(I,5,()=>o(O).refs,ba,(m,$,y)=>{var b=Vt(),H=dt(()=>Pa(o(O),o($),y));_(b,"id","R-"+y);var z=s(b),p=s(z);{var c=L=>{ht(L,{color:j})},S=L=>{xt(L,{color:j})};N(p,L=>{ka(o(O).day,y)===!0?L(c):L(S,!1)})}n(z);var B=f(z),Q=s(B),qa=s(Q,!0);g(()=>w(qa,wa(o($)))),n(Q),n(B),n(b),k("click",b,function(...L){var ua;(ua=o(H))==null||ua.apply(this,L)}),u(m,b)}),n(I),n(v),n(r),k("mousedown",t,za),k("mousemove",t,Ra),k("mouseup",t,da),k("mouseleave",t,da),u(a,e)};N(ga,a=>{o(P)==="calendar"&&a(Ea)})}var Ua=f(ga,2);{var Xa=a=>{var e=Lt(),t=s(e),d=s(t,!0);n(t);var r=f(t,2),v=s(r,!0);n(r),n(e),g(()=>{w(d,R().Plans_Config_Stop_Plan_info),w(v,R().Plans_Button_Stop_Plan)}),k("click",r,()=>at.open(tt,Da)),u(a,e)};N(Ua,a=>{o(P)==="settings"&&a(Xa)})}n(pa),n(ca),n(ea),g(()=>{_(K,"style",o(Ba)),Y(A,`dy-tab dy-tab-bordered ${(o(P)==="info"?"dy-tab-active":"")??""}`),_(A,"style",o(La)),Y(U,`dy-tab ${(o(P)==="calendar"?"dy-tab-active":"")??""}`)}),k("click",A,()=>V(P,"info")),k("click",U,()=>V(P,"calendar")),u(M,ea),rt(),D()}export{ae as component,Zt as universal};
